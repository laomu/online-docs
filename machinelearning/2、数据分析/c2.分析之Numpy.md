# NumPyï¼šæ•°æ®é­”æ³•å¸ˆçš„å†’é™©ä¹‹æ—… ğŸš€âœ¨

## ä¸€ã€åˆè¯†NumPyï¼šé­”æ³•ä¸–ç•Œçš„å¤§é—¨ ğŸŒˆ
### 1. ä»€ä¹ˆæ˜¯NumPyï¼Ÿ
- æ•°æ®é­”æ³•ä¸–ç•Œçš„åŸºçŸ³
- ç§‘å­¦è®¡ç®—çš„è¶…çº§è‹±é›„
- ä¸ºä»€ä¹ˆå®ƒæ˜¯æ•°æ®åˆ†æçš„å¿…ä¿®è¯¾

### 2. å®‰è£…ä¸å‡†å¤‡
```python
# å®‰è£…NumPy
pip install numpy

# å¯¼å…¥NumPy
import numpy as np
```

## äºŒã€æ•°ç»„åˆ›å»ºï¼šå¬å”¤ä½ çš„ç¬¬ä¸€ä¸ªæ•°æ®é­”æ³• âœ¨
### 1. ä¸€ç»´æ•°ç»„ï¼šé­”æ³•å¸ˆçš„é­”æ–
```python
# åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªæ•°ç»„
my_array = np.array([1, 2, 3, 4, 5])
```

### 2. å¤šç»´æ•°ç»„ï¼šç»´åº¦çš„è‰ºæœ¯
```python
# äºŒç»´æ•°ç»„ï¼šé­”æ³•çŸ©é˜µ
matrix = np.array([[1, 2, 3],
                  [4, 5, 6],
                  [7, 8, 9]])
print("é­”æ³•çŸ©é˜µï¼š\n", matrix)

# ä¸‰ç»´æ•°ç»„ï¼šç©ºé—´é­”æ³•
cube = np.array([[[1, 2], [3, 4]],
                [[5, 6], [7, 8]]])
print("\nç©ºé—´é­”æ³•ç«‹æ–¹ä½“ï¼š\n", cube)

# ç‰¹æ®Šæ•°ç»„çš„åˆ›å»º
zeros_matrix = np.zeros((3, 3))  # åˆ›å»º3x3çš„é›¶çŸ©é˜µ
print("\né›¶é­”æ³•é˜µï¼š\n", zeros_matrix)

ones_matrix = np.ones((2, 4))    # åˆ›å»º2x4çš„å…¨1çŸ©é˜µ
print("\nå…‰æ˜é­”æ³•é˜µï¼š\n", ones_matrix)

eye_matrix = np.eye(3)           # åˆ›å»º3x3çš„å•ä½çŸ©é˜µ
print("\né­”æ³•ä¹‹çœ¼ï¼š\n", eye_matrix)
```

### 3. éšæœºæ•°ç»„ï¼šæ¦‚ç‡é­”æ³•
```python
# è®¾ç½®éšæœºç§å­ï¼Œç¡®ä¿é­”æ³•çš„å¯é‡å¤æ€§
np.random.seed(42)

# å‡åŒ€åˆ†å¸ƒéšæœºé­”æ³•
uniform_magic = np.random.rand(3, 3)  # ç”Ÿæˆ3x3çš„0-1å‡åŒ€åˆ†å¸ƒéšæœºæ•°
print("å‡åŒ€åˆ†å¸ƒé­”æ³•é˜µï¼š\n", uniform_magic)

# æ­£æ€åˆ†å¸ƒéšæœºé­”æ³•
normal_magic = np.random.normal(loc=0, scale=1, size=(3, 3))  # å‡å€¼0ï¼Œæ ‡å‡†å·®1
print("\næ­£æ€åˆ†å¸ƒé­”æ³•é˜µï¼š\n", normal_magic)

# æ•´æ•°éšæœºé­”æ³•
int_magic = np.random.randint(1, 100, size=(2, 4))  # ç”Ÿæˆ1-100ä¹‹é—´çš„éšæœºæ•´æ•°
print("\næ•´æ•°é­”æ³•é˜µï¼š\n", int_magic)

# éšæœºæ´—ç‰Œé­”æ³•
card_deck = np.arange(1, 11)  # åˆ›å»º1-10çš„åºåˆ—
np.random.shuffle(card_deck)  # éšæœºæ‰“ä¹±é¡ºåº
print("\næ´—ç‰Œåçš„é­”æ³•å¡ç»„ï¼š", card_deck)
```

## ä¸‰ã€æ•°ç»„æ“ä½œï¼šåŸºç¡€é­”æ³•æŠ€èƒ½ ğŸ¯
### 1. å½¢çŠ¶å˜æ¢ï¼šç©ºé—´é‡å¡‘
```python
# åˆ›å»ºä¸€ä¸ª1-12çš„é­”æ³•åºåˆ—
magic_sequence = np.arange(1, 13)
print("åŸå§‹é­”æ³•åºåˆ—ï¼š", magic_sequence)

# reshapeé­”æ³•ï¼šå°†ä¸€ç»´å˜ä¸ºäºŒç»´
magic_2d = magic_sequence.reshape(3, 4)
print("\näºŒç»´é­”æ³•é˜µï¼š\n", magic_2d)

# reshapeé­”æ³•ï¼šå°†äºŒç»´å˜ä¸ºä¸‰ç»´
magic_3d = magic_2d.reshape(2, 2, 3)
print("\nä¸‰ç»´é­”æ³•ç«‹æ–¹ï¼š\n", magic_3d)

# é™ç»´é­”æ³•ï¼šflatten vs ravel
# flattenåˆ›å»ºå‰¯æœ¬
flat_magic = magic_2d.flatten()
print("\nflattené™ç»´ï¼ˆå‰¯æœ¬ï¼‰ï¼š", flat_magic)

# ravelåˆ›å»ºè§†å›¾ï¼ˆå…±äº«å†…å­˜ï¼‰
ravel_magic = magic_2d.ravel()
print("\nravelé™ç»´ï¼ˆè§†å›¾ï¼‰ï¼š", ravel_magic)

# éªŒè¯ravelçš„è§†å›¾ç‰¹æ€§
ravel_magic[0] = 99  # ä¿®æ”¹ç¬¬ä¸€ä¸ªå…ƒç´ 
print("\nä¿®æ”¹åçš„åŸå§‹é­”æ³•é˜µï¼š\n", magic_2d)  # åŸæ•°ç»„ä¹Ÿä¼šæ”¹å˜
```

### 2. ç´¢å¼•ä¸åˆ‡ç‰‡ï¼šç²¾å‡†æ§åˆ¶
```python
# åˆ›å»ºä¸€ä¸ªç¤ºä¾‹é­”æ³•é˜µ
magic_array = np.array([[1, 2, 3, 4],
                      [5, 6, 7, 8],
                      [9, 10, 11, 12]])
print("åŸå§‹é­”æ³•é˜µï¼š\n", magic_array)

# åŸºç¡€ç´¢å¼•é­”æ³•ï¼šç›´æ¥è®¿é—®
print("\nç¬¬äºŒè¡Œç¬¬ä¸‰åˆ—çš„å…ƒç´ ï¼š", magic_array[1, 2])  # è¾“å‡º7
print("ç¬¬ä¸€è¡Œæ‰€æœ‰å…ƒç´ ï¼š", magic_array[0, :])    # è¾“å‡ºç¬¬ä¸€è¡Œ
print("ç¬¬äºŒåˆ—æ‰€æœ‰å…ƒç´ ï¼š", magic_array[:, 1])    # è¾“å‡ºç¬¬äºŒåˆ—

# åˆ‡ç‰‡é­”æ³•ï¼šåŒºé—´é€‰æ‹©
print("\nå‰ä¸¤è¡Œï¼Œä¸­é—´ä¸¤åˆ—ï¼š\n", magic_array[0:2, 1:3])

# èŠ±å¼ç´¢å¼•é­”æ³•ï¼šé«˜çº§é€‰æ‹©
row_indices = [0, 2]  # é€‰æ‹©ç¬¬ä¸€è¡Œå’Œç¬¬ä¸‰è¡Œ
col_indices = [1, 3]  # é€‰æ‹©ç¬¬äºŒåˆ—å’Œç¬¬å››åˆ—
print("\né€‰å®šçš„è¡Œå’Œåˆ—ï¼š\n", magic_array[row_indices][:, col_indices])

# å¸ƒå°”ç´¢å¼•é­”æ³•ï¼šæ¡ä»¶ç­›é€‰
mask = magic_array > 6  # åˆ›å»ºå¸ƒå°”æ©ç 
print("\nå¤§äº6çš„å…ƒç´ æ©ç ï¼š\n", mask)
print("å¤§äº6çš„å…ƒç´ ï¼š", magic_array[mask])

# ç»„åˆæ¡ä»¶é­”æ³•
complex_mask = (magic_array > 3) & (magic_array < 9)
print("\n3åˆ°9ä¹‹é—´çš„å…ƒç´ ï¼š", magic_array[complex_mask])
```

## å››ã€æ•°å­¦è¿ç®—ï¼šæ•°å€¼é­”æ³•çš„ç²¾é«“ ğŸ”¢
### 1. åŸºç¡€è¿ç®—ï¼šå››åˆ™è¿ç®—çš„é­”æ³•
```python
# åˆ›å»ºä¸¤ä¸ªé­”æ³•é˜µ
array1 = np.array([[1, 2, 3],
                  [4, 5, 6]])
array2 = np.array([[7, 8, 9],
                  [10, 11, 12]])

# åŸºç¡€å››åˆ™è¿ç®—é­”æ³•
print("åŠ æ³•é­”æ³•ï¼š\n", array1 + array2)
print("\nå‡æ³•é­”æ³•ï¼š\n", array2 - array1)
print("\nä¹˜æ³•é­”æ³•ï¼š\n", array1 * array2)  # å…ƒç´ çº§ä¹˜æ³•
print("\né™¤æ³•é­”æ³•ï¼š\n", array2 / array1)

# å¹¿æ’­æœºåˆ¶é­”æ³•
# æ•°ç»„ä¸æ ‡é‡è¿ç®—
print("\næ•°ç»„ä¹˜ä»¥2ï¼š\n", array1 * 2)

# ä¸åŒå½¢çŠ¶æ•°ç»„çš„å¹¿æ’­
array3 = np.array([1, 2, 3])  # 1Dæ•°ç»„
print("\n2Dæ•°ç»„ä¸1Dæ•°ç»„ç›¸åŠ ï¼ˆå¹¿æ’­ï¼‰ï¼š\n", array1 + array3)

# æ•°å­¦å‡½æ•°é­”æ³•
print("\nå¹³æ–¹é­”æ³•ï¼š\n", np.square(array1))
print("\nå¹³æ–¹æ ¹é­”æ³•ï¼š\n", np.sqrt(array1))
print("\næŒ‡æ•°é­”æ³•ï¼š\n", np.exp(array1))
```

### 2. çŸ©é˜µè¿ç®—ï¼šçº¿æ€§ä»£æ•°çš„è‰ºæœ¯
```python
# åˆ›å»ºä¸¤ä¸ªçŸ©é˜µé­”æ³•é˜µ
matrix1 = np.array([[1, 2],
                   [3, 4]])
matrix2 = np.array([[5, 6],
                   [7, 8]])

# çŸ©é˜µä¹˜æ³•é­”æ³•ï¼ˆç‚¹ç§¯ï¼‰
matrix_product = np.dot(matrix1, matrix2)
# æˆ–ä½¿ç”¨ @ è¿ç®—ç¬¦
matrix_product_alt = matrix1 @ matrix2
print("çŸ©é˜µä¹˜æ³•é­”æ³•ï¼š\n", matrix_product)

# çŸ©é˜µè½¬ç½®é­”æ³•
print("\nè½¬ç½®é­”æ³•ï¼š\n", matrix1.T)

# çŸ©é˜µæ±‚é€†é­”æ³•
inv_matrix = np.linalg.inv(matrix1)
print("\né€†çŸ©é˜µé­”æ³•ï¼š\n", inv_matrix)

# éªŒè¯é€†çŸ©é˜µ
print("\nåŸçŸ©é˜µä¸é€†çŸ©é˜µçš„ä¹˜ç§¯ï¼ˆåº”æ¥è¿‘å•ä½çŸ©é˜µï¼‰ï¼š\n", matrix1 @ inv_matrix)

# è®¡ç®—è¡Œåˆ—å¼
det = np.linalg.det(matrix1)
print("\nè¡Œåˆ—å¼é­”æ³•ï¼š", det)

# ç‰¹å¾å€¼å’Œç‰¹å¾å‘é‡é­”æ³•
eigenvalues, eigenvectors = np.linalg.eig(matrix1)
print("\nç‰¹å¾å€¼é­”æ³•ï¼š", eigenvalues)
print("\nç‰¹å¾å‘é‡é­”æ³•ï¼š\n", eigenvectors)
```

## äº”ã€ç»Ÿè®¡åˆ†æï¼šæ•°æ®æ´å¯ŸåŠ› ğŸ“Š
### 1. æè¿°ç»Ÿè®¡ï¼šæ•°æ®æ•…äº‹
```python
# åˆ›å»ºä¸€ä¸ªæˆç»©é­”æ³•é˜µ
scores = np.array([[85, 92, 78, 90],
                  [79, 88, 95, 85],
                  [92, 86, 89, 91]])
print("æˆç»©é­”æ³•é˜µï¼š\n", scores)

# åŸºç¡€ç»Ÿè®¡é­”æ³•
print("\nå¹³å‡æˆç»©ï¼š", np.mean(scores))
print("æˆç»©æ–¹å·®ï¼š", np.var(scores))
print("æˆç»©æ ‡å‡†å·®ï¼š", np.std(scores))
print("æœ€é«˜åˆ†ï¼š", np.max(scores))
print("æœ€ä½åˆ†ï¼š", np.min(scores))
print("ä¸­ä½æ•°ï¼š", np.median(scores))

# åˆ†ä½æ•°é­”æ³•
print("\n25%åˆ†ä½æ•°ï¼š", np.percentile(scores, 25))
print("75%åˆ†ä½æ•°ï¼š", np.percentile(scores, 75))

# ç»Ÿè®¡æè¿°æ±‡æ€»
print("\næˆç»©åˆ†å¸ƒæè¿°ï¼š")
for stat in [np.min, np.max, np.mean, np.median, np.std]:
    print(f"{stat.__name__}: {stat(scores)}")
```

### 2. èšåˆæ“ä½œï¼šæ•°æ®æµ“ç¼©
```python
# æŒ‰è½´è®¡ç®—é­”æ³•
print("æ¯ä¸ªå­¦ç”Ÿçš„å¹³å‡åˆ†ï¼š", np.mean(scores, axis=1))  # axis=1è¡¨ç¤ºè¡Œæ–¹å‘
print("\næ¯é—¨è¯¾çš„å¹³å‡åˆ†ï¼š", np.mean(scores, axis=0))  # axis=0è¡¨ç¤ºåˆ—æ–¹å‘

# ç´¯ç§¯ç»Ÿè®¡é­”æ³•
print("\næˆç»©ç´¯ç§¯å’Œï¼š\n", np.cumsum(scores, axis=1))  # è¡Œæ–¹å‘ç´¯ç§¯

# è‡ªå®šä¹‰èšåˆé­”æ³•
def score_range(x):
    return np.max(x) - np.min(x)

print("\næ¯ä¸ªå­¦ç”Ÿçš„åˆ†æ•°èŒƒå›´ï¼š", np.apply_along_axis(score_range, 1, scores))

# å¤šç»´ç»Ÿè®¡é­”æ³•
print("\næ‰€æœ‰æˆç»©çš„æè¿°ç»Ÿè®¡ï¼š")
print(np.array([scores.min(), scores.max(), scores.mean(), scores.std()]))
```

## å…­ã€å®æˆ˜æ¡ˆä¾‹ï¼šé­”æ³•çš„å®é™…åº”ç”¨ ğŸ’¼
### 1. è‚¡å¸‚åˆ†æï¼šé¢„æµ‹æœªæ¥
```python
# è‚¡ç¥¨ä»·æ ¼åˆ†æç¤ºä¾‹
stock_prices = np.array([100, 102, 104, 101, 99])
returns = np.diff(stock_prices) / stock_prices[:-1]
```

### 2. å›¾åƒå¤„ç†ï¼šè§†è§‰é­”æ³•
```python
# åˆ›å»ºä¸€ä¸ªç®€å•çš„å›¾åƒé­”æ³•é˜µï¼ˆç°åº¦å›¾åƒï¼‰
image = np.array([[50, 100, 150],
                 [100, 150, 200],
                 [150, 200, 250]])
print("åŸå§‹å›¾åƒé­”æ³•é˜µï¼š\n", image)

# å›¾åƒç¿»è½¬é­”æ³•
flipped_vertical = np.flipud(image)    # ä¸Šä¸‹ç¿»è½¬
print("\nä¸Šä¸‹ç¿»è½¬é­”æ³•ï¼š\n", flipped_vertical)

flipped_horizontal = np.fliplr(image)  # å·¦å³ç¿»è½¬
print("\nå·¦å³ç¿»è½¬é­”æ³•ï¼š\n", flipped_horizontal)

# å›¾åƒæ—‹è½¬é­”æ³•
rotated = np.rot90(image)              # æ—‹è½¬90åº¦
print("\næ—‹è½¬é­”æ³•ï¼š\n", rotated)

# å›¾åƒç¼©æ”¾é­”æ³•ï¼ˆé€šè¿‡é‡å¤å…ƒç´ ï¼‰
scaled = np.repeat(np.repeat(image, 2, axis=0), 2, axis=1)
print("\næ”¾å¤§é­”æ³•ï¼š\n", scaled)

# å›¾åƒäº®åº¦è°ƒæ•´é­”æ³•
brightness = image * 1.5               # å¢åŠ äº®åº¦
print("\næäº®é­”æ³•ï¼š\n", brightness)

# å›¾åƒå¯¹æ¯”åº¦é­”æ³•
contrast = (image - np.mean(image)) * 1.5 + np.mean(image)
print("\nå¯¹æ¯”åº¦å¢å¼ºé­”æ³•ï¼š\n", contrast)

# å›¾åƒè¾¹ç¼˜æ£€æµ‹é­”æ³•ï¼ˆç®€å•å·®åˆ†ï¼‰
edges_x = np.diff(image, axis=1)       # æ°´å¹³è¾¹ç¼˜
print("\næ°´å¹³è¾¹ç¼˜æ£€æµ‹é­”æ³•ï¼š\n", edges_x)
```

### 3. å­¦ç”Ÿæˆç»©åˆ†æï¼šæ•™è‚²æ•°æ®
```python
# æˆç»©åˆ†æç¤ºä¾‹
scores = np.array([[85, 90, 88],
                   [92, 87, 85],
                   [78, 85, 90]])
mean_scores = np.mean(scores, axis=1)  # æ¯ä¸ªå­¦ç”Ÿçš„å¹³å‡åˆ†
```

## ä¸ƒã€æ€§èƒ½ä¼˜åŒ–ï¼šé­”æ³•çš„æ•ˆç‡ âš¡
### 1. å‘é‡åŒ–æ“ä½œï¼šå‘Šåˆ«å¾ªç¯
```python
# ä¼ ç»Ÿå¾ªç¯æ–¹å¼ï¼ˆæ…¢ï¼‰
def slow_sum_squares(n):
    result = 0
    for i in range(n):
        result += i ** 2
    return result

# å‘é‡åŒ–æ“ä½œï¼ˆå¿«ï¼‰
def fast_sum_squares(n):
    return np.sum(np.arange(n) ** 2)

# æ€§èƒ½å¯¹æ¯”
import time

n = 1000000

# æµ‹è¯•å¾ªç¯æ–¹å¼
start_time = time.time()
slow_result = slow_sum_squares(n)
print(f"å¾ªç¯é­”æ³•è€—æ—¶ï¼š{time.time() - start_time:.4f}ç§’")

# æµ‹è¯•å‘é‡åŒ–æ–¹å¼
start_time = time.time()
fast_result = fast_sum_squares(n)
print(f"å‘é‡åŒ–é­”æ³•è€—æ—¶ï¼š{time.time() - start_time:.4f}ç§’")

# éªŒè¯ç»“æœä¸€è‡´æ€§
print(f"ç»“æœæ˜¯å¦ç›¸åŒï¼š{slow_result == fast_result}")

# æ¡ä»¶æ“ä½œçš„å‘é‡åŒ–
data = np.array([1, -2, 3, -4, 5])

# ä¼ ç»Ÿæ–¹å¼
positive_sum = 0
for x in data:
    if x > 0:
        positive_sum += x

# å‘é‡åŒ–æ–¹å¼
positive_sum_fast = np.sum(data[data > 0])

print(f"æ­£æ•°ä¹‹å’Œï¼š{positive_sum_fast}")
```

### 2. å†…å­˜ç®¡ç†ï¼šèµ„æºæ§åˆ¶
```python
# æ•°æ®ç±»å‹çš„é€‰æ‹©
# åˆ›å»ºä¸åŒæ•°æ®ç±»å‹çš„æ•°ç»„
int_array = np.array([1, 2, 3], dtype=np.int32)
float_array = np.array([1, 2, 3], dtype=np.float64)

print(f"æ•´æ•°æ•°ç»„å ç”¨å†…å­˜ï¼š{int_array.nbytes} å­—èŠ‚")
print(f"æµ®ç‚¹æ•°ç»„å ç”¨å†…å­˜ï¼š{float_array.nbytes} å­—èŠ‚")

# å†…å­˜è§†å›¾ä¸å¤åˆ¶
# åˆ›å»ºåŸå§‹æ•°ç»„
original = np.array([[1, 2, 3],
                    [4, 5, 6]])

# åˆ›å»ºè§†å›¾ï¼ˆå…±äº«å†…å­˜ï¼‰
view = original.view()

# åˆ›å»ºå‰¯æœ¬ï¼ˆç‹¬ç«‹å†…å­˜ï¼‰
copy = original.copy()

# ä¿®æ”¹åŸå§‹æ•°ç»„
original[0, 0] = 99

print("åŸå§‹é­”æ³•é˜µï¼š\n", original)
print("è§†å›¾é­”æ³•é˜µï¼š\n", view)      # ä¼šè·Ÿç€æ”¹å˜
print("å‰¯æœ¬é­”æ³•é˜µï¼š\n", copy)      # ä¿æŒä¸å˜

# æ£€æŸ¥æ•°ç»„æ˜¯å¦å…±äº«å†…å­˜
print(f"è§†å›¾æ˜¯å¦å…±äº«å†…å­˜ï¼š{np.may_share_memory(original, view)}")
print(f"å‰¯æœ¬æ˜¯å¦å…±äº«å†…å­˜ï¼š{np.may_share_memory(original, copy)}")

# ä½¿ç”¨stride_tricksè¿›è¡Œé«˜çº§å†…å­˜æ“ä½œ
from numpy.lib import stride_tricks

# åˆ›å»ºä¸€ä¸ªæ•°ç»„
array = np.arange(10)

# ä½¿ç”¨stride_tricksåˆ›å»ºæ»‘åŠ¨çª—å£
window_size = 3
strides = (array.strides[0],) * 2
shape = (len(array) - window_size + 1, window_size)

windows = stride_tricks.as_strided(array, shape=shape, strides=strides)
print("\næ»‘åŠ¨çª—å£é­”æ³•ï¼š\n", windows)
```

## å…«ã€ä¸å…¶ä»–åº“çš„åä½œï¼šé­”æ³•çš„èåˆ ğŸ¤
### 1. NumPyä¸Pandas
```python
# å¯¼å…¥å¿…è¦çš„åº“
import numpy as np
import pandas as pd

# åˆ›å»ºNumPyæ•°ç»„
np_array = np.array([[1, 2, 3],
                    [4, 5, 6],
                    [7, 8, 9]])

# NumPyæ•°ç»„è½¬æ¢ä¸ºPandas DataFrame
df = pd.DataFrame(np_array, columns=['A', 'B', 'C'])
print("Pandasé­”æ³•è¡¨æ ¼ï¼š\n", df)

# DataFrameè½¬å›NumPyæ•°ç»„
np_back = df.to_numpy()
print("\nè½¬å›NumPyé­”æ³•é˜µï¼š\n", np_back)

# åœ¨Pandasä¸­ä½¿ç”¨NumPyå‡½æ•°
print("\nä½¿ç”¨NumPyé­”æ³•è®¡ç®—å‡å€¼ï¼š\n", np.mean(df))

# æ¡ä»¶ç­›é€‰çš„ååŒ
mask = np_array > 5
print("\nNumPyæ¡ä»¶é­”æ³•ï¼š\n", np_array[mask])
print("\nPandasæ¡ä»¶é­”æ³•ï¼š\n", df[df > 5])
```

### 2. NumPyä¸Matplotlib
```python
# å¯¼å…¥å¿…è¦çš„åº“
import numpy as np
import matplotlib.pyplot as plt

# åˆ›å»ºæ•°æ®
x = np.linspace(0, 2*np.pi, 100)
y = np.sin(x)

# åˆ›å»ºå›¾å½¢
plt.figure(figsize=(10, 6))

# ç»˜åˆ¶æ­£å¼¦æ³¢
plt.plot(x, y, label='é­”æ³•æ³¢åŠ¨')
plt.title('NumPyé­”æ³•æ³¢å½¢å›¾')
plt.xlabel('æ—¶é—´é­”åŠ›')
plt.ylabel('æ³¢åŠ¨å¼ºåº¦')
plt.grid(True)
plt.legend()

# æ·»åŠ ä¸€äº›éšæœºæ•°æ®ç‚¹
random_x = np.random.uniform(0, 2*np.pi, 20)
random_y = np.sin(random_x) + np.random.normal(0, 0.1, 20)
plt.scatter(random_x, random_y, color='red', label='é­”æ³•ç²’å­')

# ä½¿ç”¨NumPyè®¡ç®—è¶‹åŠ¿çº¿
z = np.polyfit(x, y, 3)
p = np.poly1d(z)
plt.plot(x, p(x), 'r--', label='é­”æ³•è¶‹åŠ¿')

plt.legend()
plt.show()

# åˆ›å»º3Då›¾å½¢
fig = plt.figure(figsize=(10, 7))
ax = fig.add_subplot(111, projection='3d')

# ç”Ÿæˆ3Dæ•°æ®
x = np.linspace(-5, 5, 100)
y = np.linspace(-5, 5, 100)
X, Y = np.meshgrid(x, y)
Z = np.sin(np.sqrt(X**2 + Y**2))

# ç»˜åˆ¶3Dè¡¨é¢
surf = ax.plot_surface(X, Y, Z, cmap='magma')
fig.colorbar(surf)

ax.set_title('3Dé­”æ³•åœºåŸŸ')
plt.show()
```

## ä¹ã€é«˜çº§ç‰¹æ€§ï¼šé­”æ³•å¸ˆçš„è¿›é˜¶ä¹‹è·¯ ğŸ“
### 1. é€šç”¨å‡½æ•°ï¼ˆufuncï¼‰
```python
# å¯¼å…¥å¿…è¦çš„åº“
import numpy as np

# åˆ›å»ºç®€å•çš„è‡ªå®šä¹‰ufunc
def custom_power(x, n):
    return x ** n

# å°†Pythonå‡½æ•°è½¬æ¢ä¸ºufunc
custom_power_ufunc = np.frompyfunc(custom_power, 2, 1)

# æµ‹è¯•è‡ªå®šä¹‰ufunc
array = np.array([1, 2, 3, 4])
print("è‡ªå®šä¹‰é­”æ³•ç»“æœï¼š\n", custom_power_ufunc(array, 3))

# åˆ›å»ºæ›´å¤æ‚çš„ufunc
@np.vectorize
def magic_transform(x):
    if x < 0:
        return x ** 2
    else:
        return np.sqrt(x)

# æµ‹è¯•å‘é‡åŒ–å‡½æ•°
test_array = np.array([-4, -2, 0, 2, 4])
print("\né­”æ³•å˜æ¢ç»“æœï¼š\n", magic_transform(test_array))

# ä½¿ç”¨numbaåŠ é€Ÿufunc
from numba import vectorize

@vectorize(['float64(float64, float64)'])
def fast_magic(x, y):
    return x * x + y * y

# æµ‹è¯•numbaåŠ é€Ÿçš„ufunc
x = np.array([1, 2, 3])
y = np.array([4, 5, 6])
print("\nå¿«é€Ÿé­”æ³•ç»“æœï¼š\n", fast_magic(x, y))
```

### 2. ç»“æ„åŒ–æ•°ç»„
```python
# å®šä¹‰ç»“æ„åŒ–æ•°æ®ç±»å‹
student_dtype = np.dtype([
    ('name', 'U20'),      # Unicodeå­—ç¬¦ä¸²ï¼Œæœ€å¤§é•¿åº¦20
    ('age', 'i4'),        # 32ä½æ•´æ•°
    ('grades', 'f8', 3),  # 3ä¸ª64ä½æµ®ç‚¹æ•°
    ('passed', 'bool')    # å¸ƒå°”å€¼
])

# åˆ›å»ºç»“æ„åŒ–æ•°ç»„
students = np.array([
    ('é­”æ³•å¸ˆå°æ˜', 18, [85, 92, 88], True),
    ('é­”å¯¼å£«å°çº¢', 19, [95, 85, 90], True),
    ('è§ä¹ æ³•å¸ˆå°å¼ ', 17, [78, 65, 72], False)
], dtype=student_dtype)

# è®¿é—®æ•°æ®
print("å­¦ç”Ÿåå•ï¼š\n", students['name'])
print("\nå¹´é¾„ç»Ÿè®¡ï¼š\n", students['age'])
print("\nå¹³å‡æˆç»©ï¼š\n", np.mean(students['grades'], axis=1))

# æ¡ä»¶ç­›é€‰
passed_students = students[students['passed']]
print("\né€šè¿‡è€ƒæ ¸çš„å­¦ç”Ÿï¼š\n", passed_students['name'])

# åˆ›å»ºè®°å½•æ•°ç»„
from numpy.lib import recfunctions as rfn

# æ·»åŠ æ–°å­—æ®µ
students_extended = rfn.append_fields(
    students,
    'magic_power',
    np.mean(students['grades'], axis=1),
    dtypes='f8'
)

print("\né­”æ³•èƒ½é‡å€¼ï¼š\n", students_extended[['name', 'magic_power']])

# ç»“æ„åŒ–æ•°ç»„çš„æ’åº
sorted_students = np.sort(students_extended, order=['magic_power'])
print("\næŒ‰é­”æ³•èƒ½é‡æ’åºï¼š\n", sorted_students[['name', 'magic_power']])
```

## åã€æ€»ç»“ï¼šæˆä¸ºæ•°æ®é­”æ³•å¸ˆ ğŸŒŸ
### 1. NumPyçš„æ ¸å¿ƒä»·å€¼
- ç§‘å­¦è®¡ç®—çš„åŸºç¡€
- æ•°æ®åˆ†æçš„åŠ©æ¨å™¨
- æœºå™¨å­¦ä¹ çš„å‰æ

### 2. è¿›é˜¶ä¹‹è·¯
- æ·±å…¥å­¦ä¹ çš„æ–¹å‘
- å®è·µé¡¹ç›®çš„å»ºè®®

è®°ä½ï¼šæ¯ä¸ªä¼Ÿå¤§çš„æ•°æ®é­”æ³•å¸ˆéƒ½æ˜¯ä»åŸºç¡€å¼€å§‹çš„ã€‚é€šè¿‡ä¸æ–­ç»ƒä¹ å’Œå®è·µï¼Œä½ ä¹Ÿå°†æˆä¸ºæ•°æ®é­”æ³•ä¸–ç•Œçš„å¤§å¸ˆï¼ğŸ¯